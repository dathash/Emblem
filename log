
emblem
log

Plan
> Build a fun little game!

# Notes
July 15
* I'm finding that there are many easy tasks, which are not essential, which I
    love to do, and few very difficult tasks, which are essential, which I do
    not want to do. It is as though the force of gravity pulls me down, away
    from the work that truly needs doing.
* Also of note is that refactoring is pretty enjoyable, especially when I
    write decent code. Maybe it falls into that category of easy tasks above,
    but it feels beneficial in some way.	
* Testing, however, seems to have very little import. I will try some more,
    but it has some crucial flaws.  To test the important parts of the system is
    difficult, and to test the trivial parts of the system is easy.  Must
    reconcile these differences.

November 4
* Returned to the game after a long time away.
    It's actually pretty well put together, and I didn't have a hard time
    reading the code or adding something new.
* I'm still a little intimidated by adding big features, which is next.

# Log
## Summer 2022
June 30 | 6h  | 500 lines     | Start
July 1  | 10h | 1500 		  | Stayed up till 3 working on Command system. Very excited!
July 2  | 8	  | 2100		  | Finished most of basic commands.
July 3  | 9h  | 3000		  | Added most command functionality. Added tweens and animated sprites. Also some User Interface!
July 4  | 1h  | 3100		  | Didn't have much time today. Just added some little tweaks and started on combat.
July 7  | 3h  | 3300		  | Finished level loading system. Pretty happy with such quick work.
July 8  | 6h  | 3100		  | Dropped tween system, added some rudimentary AI.
July 9  | 3h  | 3300		  | Finished rudimentary AI.
July 12 | 3h  | 3000		  | Big refactor! Feels a lot better now.
July 14 | 2h  | 3100		  | Worked a bit on refining interfaces.
July 15 | 3h  | 3500		  | Refactoring and added Health Bar
July 16 | 3h  | 3600 		  | Added Miniaudio. Created more info menu displays.
Total   | 57h

## Fall 2022
Nov 4   | 1h  | 3800 lines     | Added Portraits to the game.
Nov 5   | 6h  | 3900 lines     | Added Editor features, like saving/loading files.
## Winter 2023
Dec 23  | 2h  | 4000 lines      | Refactored input function. Started work on pathfinding.
Dec 28  | 6h  | 4300 lines      | Finished pathfinding, level editor, refactored
                                  various stupid things I was doing. Realized
                                  how many stupid things I was doing.
Dec 29  | 6h  | 4300 lines      | Finished pathfinding, level editor, refactored
Dec 29  | 6h  | ???             | Mostly refactoring and tilesets
Dec 30  | 6h  | 4200 lines      | UI Day! Swapped gross retained mode code to IMGUI.
Dec 31 â€“ Jan 4 | 22h  | 4300 lines | Read the commits.

# Style
## Concept
Cool, slick.
Fast.

## Look
neons
akira streaking lights

## Songs
epilogue (r4 - ridge racer type 4)
quiet curves (r4 as well)
spiny desert (mario party 3)
Track 13 (super b-daman: battle phoenix 64)
pokemon selection (pokemon stadium)
    Maybe some drum corps songs?
Dark Ages 1 (Norse by Northwest - the return of the lost vikings)
Intro Theme (Tom Clancy's Rainbow Six)
Super Mario 64 Title Theme
Tripod (Bomberman Hero)
Sometimes I breath (planet dob)

# Ideas
## Brainstorm
What is appealing to me about tactics games?
    Being in Command
    Individual Characters
        Strong Characterization
        Developing Relationships
    Permadeath sacrifices
    Gaining new team members
    RPG Elements
        Nurturing weak units until they're strong.
        That's it. I pretty much think all other uses of RPG mechanics in these
        games are a waste of time.
        Strategy is good. Just the incessant "Level Up!" portion of Fire Emblem
        makes me sick.
            Big numbers != fun game.
    The beginning of Fire Emblem games are always the best.
    Middle of a level is best.
        Beginning: Setting up, being overly cautious. Not good.
        End: Ganging up on a boss. Pretty much a waste of time.

    
Ideas
* Social Psychology game
    Characterization is deeply ingrained into combat.
        Characters bark, speak their minds.
            Cowardly character doesn't like getting sent to the front lines.
                Performs worse.
                Over time becomes more comfortable, confident.
            Confident character tends to overextend.
                Enemies hit them more often.
        Conversations mid-battle.

* Text-only tactics game?
    In D&D, the grid distracts from the moment-to-moment decisions. It makes
    the game less exciting, not more.
    Perhaps we could imbue a computer game with this sort of think-on-your-feet
    decision-making.
    Would be a lot of work to make the computer be able to communicate your
    situation well enough. This is one area where I have 'em beat.

* Deep exploration of mechanics
    Fire Emblem reaches a point where it's all sort of the same.
    What if we dug in to this?
        Made mechanics that lended themselves towards extremely specific playstyles?
        Made objectives that required modes of thinking?
        Dropped RPG elements to make way for the new puzzle-style mechanic?

## Characters
### Commander
Lucina
    Mechanics
        All based around giving allies bonuses, extra turns, extra movement, etc.
        Alters alies' characteristics. Gives some double speed, etc.
    Personality
        Naive. Figuring things out.

### Swordsman
Priam
    Mechanics
        Strong DPS
        Needs support to be useful.
            High Crit, low hit?
            Glass Cannon?
    Personality
        Super Cool
        Always knows what has to be done

### Lucky Charm
Donnel
    Mechanics
        Weak, but when he's around, everyone gets boons.
        Momentum-based mechanic. Every kill he gets, he doubles in
        effectiveness.
    Personality
        Weak, Pitiful.
        Becomes strong. Confident.
        Has a role model: Priam

### Archer
Noire
    Mechanics
        Cripple characters, stunning from afar.
    Personality
        Pitiful, cracks under pressure.
        Pushes others away.

### Dancer


### Thief
    Mechanics
        Hides in the shadows.
            Literally let them hide in walls and such.
            Flank enemies.
            They can move, attack, then move again or hide.
        Moves through all units.
    Personality
        A Historian. Like Soren.

### Tank
    Mechanics
        Doesn't deal damage at all. Basically movable wall.
        Able to throw allies around the battlefield.
    Personality
        Stoic. 
        An enjoyer of the finer things in life.

### Ouranomancer
    Mechanics
        Manipulates space.
        Warps allies around the map.
        Swaps the positioning of enemies.
    Personality

### Blaster
    Mechanics
        AOE. Out of control.
        Consequences.
    Personality

## Mechanics
Group mechanics (Units nearby eachother get bonuses)
Leader mechanics (Genealogy stars)
Fort with attack bonus instead of defense
Knight Moves?
Jumping tiles in general?
Boost teammate units over stuff?
Misty Step
Area of Effect
Grapple Mechanic, to hold units back so that Zarathustra can charge to the end.

Some levels objective is to kill all the enemies?

## Design
Replayability
* Curated rooms, enemies, etc. but randomized order.
  * Like Into the Breach
* Randomized recruits inbetween levels.
  * Like Auto-chess


# Scratch

How the program should run:

1. Player triggers "Attack", putting game into Combat state.
2. Game renders in Combat state. Nothing updates.
3. Animation ends, changing state back to normal.
   Damage is applied.
4. Game isn't in combat state anymore and continues as normal.

# TODO
PROTOTYPE ///////////////////////////////////////////////////
    8 levels

    Sound Effects

    *HUGE QA PASS*
        BUG | Enemies that can actually reach you don't believe that they can due to
        the difference in pathfinding/flood filling. We NEED To get a more unified
        solution working.
        BUG | We seg fault when an enemy has no squares? (When you surround an
              archer)
        BUG | Retry level doesn't keep retained units

CONTROLLER WITH L BUTTON

///////////////////////////////////////////////////////////////
QOL
    Have Buffs display over the stats in unit_info
    display enemy damage range, unit damage range, plus abilities too.
    Cycle units with L trigger.

Lon'qu won't crit even when 100% crit rates

Have Speed buff add to movement speed as well?
Solid walls that don't allow ranged attacks?
Emit Events in Commands
More complex conversations
* Units come and go
* Facial expression changes
Add some conversations for inbetween levels
* Menu

0.1
    Inbetween Levels | Metagame
    * Revive dead units?
    * Recruit new units?

    RPG Mechanics
    * Boosted stats?
    * New abilities?
    * Improved abilities?
    * Experience points?
    * Levels?
    Audio
        Sound Effects
        Drum-n-bass Audio

    Placing Unit moves them smoothly to that square (A-star)

    Unit Death Screen

NICE
    Real-time color editing in the editor

    Better enemy AI
        Pursuing Enemies only come for you when you get near.
        * Bresenham's line plus a certain distance (maybe 7 tiles?)
        Enemy Units have more complex decision-making process.
        * More factors like accuracy and whether they will die in the process.
        Enemies need to treat their own units as walls in a sort of sense
        * Waits until you're within a certain number of squares (probably like 5),
          then pursues
        * Bolsters until attacked, then changes to Pursue.
        State Machine?
    "Guard" action


POLISH
    Swap Noire and Donnel's Colors
    Switch Options menu to internal system.
    * Music Volume
    * Resolution?
      * This would require constructing some kind of anchor system, which would
        be an enormous amount of work. If we want to allow for variable
        resolutions, we will need to probably use Qt or something similar.
    * Quit

    Look into pixel squishing problems

    BUG | Paths are drawn without regard for walkable squares. EX: When choosing
    a square to place a unit, its path is drawn through an enemy.
    Startup Screen
    Create polished tilemaps with Tiled and overlay them onto the in-game maps.

MAYBE?
    Eventually switch over to OpenGL or Vulkan/Direct3D12
    Shrink Tilesets to absolute necessity, also enforce consistency across them
    for ease of plug-n-play.
    Attack and Move

QA
    Controller added mid-game doesn't register joystick, only buttons.
    The Next-Level code is so flimsy...
    So is the Game Over code.

REFACTOR
    Take junk out of main
